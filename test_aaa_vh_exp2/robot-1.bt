fallback
    condition IsIn(milk,fridge)
    fallback
        sequence
            condition IsSelfTask(frozenset({'IsIn(milk,fridge)'}))
            action WalkToPutIn(agent-1,milk,fridge)
            action FinishTask()
        sequence
            condition IsOpen(fridge) & IsRightHandEmpty(agent-1)
            action SelfAcceptTask(frozenset({'IsIn(milk,fridge)'}))
    sequence
        fallback
            condition IsNear(agent-1,fridge) & IsOpen(fridge) & IsRightHolding(agent-1,milk)
            sequence
                condition IsOpen(fridge) & IsRightHolding(agent-1,milk)
                action Walk(agent-1,fridge)
        action RightPutIn(agent-1,milk,fridge)
