selector
    cond IsOpen(door-0)
    sequence
        selector
            sequence
                cond IsClose(door-0)
                cond IsNear(agent-0,door-0)
                cond CanOpen(agent-0,door-0)
            sequence
                selector
                    sequence
                        cond IsClose(door-0)
                        cond IsInRoom(agent-0,0)
                        cond CanOpen(agent-0,door-0)
                        cond CanGoTo(door-0)
                    sequence
                        selector
                            sequence
                                cond IsNear(agent-0,key-0)
                                cond CanGoTo(door-0)
                                cond IsClose(door-0)
                                cond IsInRoom(agent-0,0)
                                cond IsHandEmpty(agent-0)
                            sequence
                                selector
                                    sequence
                                        cond IsClose(door-0)
                                        cond CanGoTo(key-0)
                                        cond CanGoTo(door-0)
                                        cond IsInRoom(agent-0,0)
                                        cond IsHandEmpty(agent-0)
                                    sequence
                                        sequence
                                            cond CanGoTo(key-0)
                                            cond CanGoTo(door-0)
                                            cond IsClose(door-0)
                                            cond IsInRoom(agent-0,0)
                                            cond IsHolding(agent-0,ball-0)
                                        act PutInRoom(agent-0,ball-0,0)
                                    sequence
                                        sequence
                                            cond IsHolding(agent-0,ball-1)
                                            cond CanGoTo(key-0)
                                            cond CanGoTo(door-0)
                                            cond IsClose(door-0)
                                            cond IsInRoom(agent-0,0)
                                        act PutInRoom(agent-0,ball-1,0)
                                act GoToInRoom(agent-0,key-0,0)
                            sequence
                                sequence
                                    cond IsClose(door-0)
                                    cond IsNear(agent-0,key-0)
                                    cond CanGoTo(door-0)
                                    cond IsInRoom(agent-0,0)
                                    cond IsHolding(agent-0,ball-0)
                                act PutInRoom(agent-0,ball-0,0)
                            sequence
                                sequence
                                    cond IsClose(door-0)
                                    cond IsInRoom(agent-0,0)
                                    cond IsHolding(agent-0,key-0)
                                    cond CanGoTo(door-0)
                                act PutInRoom(agent-0,key-0,0)
                            sequence
                                sequence
                                    cond IsClose(door-0)
                                    cond IsNear(agent-0,key-0)
                                    cond IsHolding(agent-0,ball-1)
                                    cond CanGoTo(door-0)
                                    cond IsInRoom(agent-0,0)
                                act PutInRoom(agent-0,ball-1,0)
                        act PickUp(agent-0,key-0)
                act GoToInRoom(agent-0,door-0,0)
            sequence
                sequence
                    cond IsClose(door-0)
                    cond IsInRoom(agent-0,1)
                    cond CanOpen(agent-0,door-0)
                    cond CanGoTo(door-0)
                act GoToInRoom(agent-0,door-0,1)
        act Toggle(agent-0,door-0)
