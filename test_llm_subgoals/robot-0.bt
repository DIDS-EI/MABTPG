fallback
    condition IsInRoom(ball-0,room-1)
    fallback
        sequence
            condition IsSelfTask(frozenset({'IsOpen(door-0)'}))
            action MoveItemBetweenRooms(agent-0,ball-0,room-0,room-1)
        sequence
            fallback
                condition IsOpen(door-0)
                fallback
                    sequence
                        condition IsSelfTask(frozenset({'CanGoTo(door-0)', 'IsInRoom(agent-0,room-0)'}))
                        action GetKeyAndOpenDoor(agent-0,door-0,key-0,room-0)
                    sequence
                        condition CanGoTo(door-0) & IsInRoom(agent-0,room-0)
                        action SelfAcceptTask(frozenset({'CanGoTo(door-0)', 'IsInRoom(agent-0,room-0)'}))
            action SelfAcceptTask(frozenset({'IsOpen(door-0)'}))
